# Maintainer: Some One <some.one@some.email.com>

_realname=cppcheck
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=1.72
pkgrel=1
pkgdesc="static analysis of C/C++ code (mingw-w64)"
arch=('any')
url="https://github.com/danmar/cppcheck"
license=('LICENSE')
makedepends=("${MINGW_PACKAGE_PREFIX}-cmake")
source=("https://github.com/danmar/cppcheck/archive/${pkgver}.tar.gz")
sha256sums=('SKIP')

build() {
  cd "${srcdir}/${_realname}-${pkgver}"

  rm -rf build
  mkdir build
  cd build

  cmake \
    -G'MSYS Makefiles' \
    -DCMAKE_INSTALL_PREFIX=${MINGW_PREFIX} \
    ..

  make
}

package() {
  cd "${srcdir}/${_realname}-${pkgver}"
  make DESTDIR=${pkgdir} install
}
