pkgname=termbox
pkgver=1.1.0
_wafver=1.9.3
pkgrel=1
arch=('i686' 'x86_64')
license=('MIT')
url="http://github.com/nsf/termbox"
makedepends=('python3')
source=(${pkgname}-${pkgver}.tar.gz::https://github.com/nsf/termbox/archive/v${pkgver}.tar.gz
        waf::https://waf.io/waf-${_wafver}
        0010-patch.patch)
sha256sums=('SKIP' 'SKIP' 'SKIP')

prepare() {
  cd ${srcdir}/${pkgname}-${pkgver}
  cp -f ${srcdir}/waf ./waf

  patch -p1 -i ${srcdir}/0010-patch.patch
}

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  /usr/bin/python waf configure --prefix=/usr
  /usr/bin/python waf build -v
}

package() {
  cd "${srcdir}"/${pkgname}-${pkgver}
  /usr/bin/python waf install --destdir="${pkgdir}"

  mkdir -p ${pkgdir}/usr/lib
  mv ${pkgdir}/usr/bin/libtermbox.a ${pkgdir}/usr/lib
  mv ${pkgdir}/usr/bin/libtermbox.dll.a ${pkgdir}/usr/lib
}
